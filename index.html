<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/fc-ico.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/fc-ico.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/fc-ico.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"wws563.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="#1 - The first rule of Fight Club is, you do not talk about Fight Club. #2 - The second rule of Fight Club is, you DO NOT talk about Fight Club. #3 - If someone says stop, goes limp, taps out, the fig">
<meta property="og:type" content="website">
<meta property="og:title" content="FightClub">
<meta property="og:url" content="https://wws563.github.io/index.html">
<meta property="og:site_name" content="FightClub">
<meta property="og:description" content="#1 - The first rule of Fight Club is, you do not talk about Fight Club. #2 - The second rule of Fight Club is, you DO NOT talk about Fight Club. #3 - If someone says stop, goes limp, taps out, the fig">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="E1son">
<meta property="article:tag" content="前端,javascript,技术,github,hexo">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://wws563.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>FightClub</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="bg-container">
    <img width="1920" height="1080" src="/images/fc-bg.jpg" />
  </div>
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">FightClub</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Welcom To "FightClub"!</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>全部文章</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wws563.github.io/2022/02/09/grandma/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/author.jpg">
      <meta itemprop="name" content="E1son">
      <meta itemprop="description" content="#1 - The first rule of Fight Club is, you do not talk about Fight Club.<br/> #2 - The second rule of Fight Club is, you DO NOT talk about Fight Club.<br/> #3 - If someone says stop, goes limp, taps out, the fight is over.<br/> #4 - Two guys to a fight.<br/> #5 - One fight at a time.<br/> #6 - No shirts, no shoes.<br/> #7 - Fights will go on as long as they have to.<br/> #8 - If this is your first night at Fight Club, you have to fight.<br/>">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FightClub">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/02/09/grandma/" class="post-title-link" itemprop="url">奶奶走好</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-02-09 00:39:21" itemprop="dateCreated datePublished" datetime="2022-02-09T00:39:21+08:00">2022-02-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-02-10 21:29:12" itemprop="dateModified" datetime="2022-02-10T21:29:12+08:00">2022-02-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%83%85%E6%84%9F/" itemprop="url" rel="index"><span itemprop="name">情感</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2022/02/09/grandma/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/02/09/grandma/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><img src="http://fightclub.myds.me:10000/images/2022/02/08/IMG_20211215_171949.md.jpg" alt="IMG_20211215_171949.md.jpg"></p>
<p>2022年春节前夕最后一个工作日，正高高兴兴和同事吃着午饭，准备着下班过年。手机一抖，收到了奶奶过世的消息。心中有过预料，但也没想到没撑过这个新年。和领导打好招呼，提前回家…</p>
<h1 id="一周前"><a href="#一周前" class="headerlink" title="一周前"></a><center>一周前</center></h1><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;一周前下班路上，我收到父亲的微信——</p>
<blockquote>
<p>你在家吗你先去奶奶那里她不太好要么先送医院</p>
</blockquote>
<p>奶奶的事，基本都是父亲和两位姑姑负责，他是儿子负主责。今天他上班，要到凌晨，所以让我先去一趟看看情况。<br><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;自从爷爷走后，奶奶便一个人住在离家不远的养老院里住着，三个子女，偶尔回去看看。祖辈俩都是农民，文化水平不高，奶奶更甚，一辈子就为了家庭而付出，没有自我二字。爷爷走后，照顾爷爷的使命也彻底结束，她人一下没了方向，本就有轻微的阿尔兹海莫症，也在几年时间内迅速恶化。21年已经基本除了最亲近的人以外的事情都搞不清楚了。但是她是个温柔的人，有些阿尔兹海莫患者会固执，会生气，会做一些破坏的事，但她只是默默坐着，没有烦扰到他人。<br><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;疫情原因，进入养老院也变得很麻烦，但这天没有，因为奶奶的状态很差，有点危险，随时可能需要送医。大约一个月前，年年突发脑梗进了急诊，勉强救回来。之后完全丧失自理能力，父亲不会网购，嘱咐我她买了粉碎机，成人纸尿裤和宝宝米粉。希望改善点营养，奶奶还能有所回复，但情况并不容乐观。<br><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这天加班，9点多来到养老院，简单登记出示健康码后，我进入了养老院，8楼35床，她的房间一共有三个老人同住。奶奶状态确实很糟，护工阿姨人挺好，比较温柔，也来和我交代情况，奶奶呼吸很困难，发出很大的声响，隔两个房间都能听到她的呼吸声。这个状态，持续了大约一天。但生命体征都还算正常，也没有发烧，不好判断需不需要送医。一会再让护士过来看下。<br><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;等待的过程，我来到奶奶身边，奶奶早已不能说话，仅能轻微挪动身体。我先轻声和她说我，孙子来啦，然后隔着被子，轻轻拍打她的手。养老院恒温，空调打得温度挺合适，虽然老人体温低，但是盖着被子的奶奶，枕头上还是被汗水浸湿了，我给她调整了一下位置，擦了一把头发。看她嘴巴非常干涩，床边柜上有她的水和一根喂水用的没有针尖的针筒。我抽出十几毫升，轻轻慢慢地挤进她的嘴里。她很吃力的咽了咽脖子，我感觉她还是有舒服一点。护工路过，看到我在喂水，便上前指导</p>
<blockquote>
<p>这根管子看到哇，水从这里喂，水你多搞一点。</p>
</blockquote>
<p><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;顺着她手指的方向，我看到一根从奶奶鼻子处伸出的一根塑料管，终点是橡皮筋箍住纱布形成的一个小馒头。解开这个小馒头，是小小的塑料盖子，打开盖子，水和流质食物都从这个管子进。先是心惊，然后心疼，最后理解，没有进食能力的她，可能会被呛致死。我鼓起勇气，往那个管子里注入了点水，不知道是心理作用，还是确实如此，从管子注入的时候，奶奶表情明显没有那么舒适。<br><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;我给奶奶看她重孙的视频，但奶奶眼睛都勉强能睁开，我也不知道她能不能看到，甚至不知道她能不能听到。但我看她眼角有一滴泪，不知道是我进门就在还是看到了视频才有。<br><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;护士来了，是个年轻的姑娘，看了眼奶奶，说的和刚才护工也差不多。但是这段时间内，奶奶的呼吸声倒是小了一点，综合考虑还是再观察看看。我陪到12点，她还是那个那样，爸让我先回去，他来接班。我看了奶奶一眼，便走了，没想到，这竟是最后一面。<br><img src="http://fightclub.myds.me:10000/images/2022/02/08/_20220209004134.md.jpg"></p>
<h1 id="传统"><a href="#传统" class="headerlink" title="传统"></a><center>传统</center></h1><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;回家以后家人们都在，姑姑姑父姐姐们都来了，镇上负责葬礼一条龙的人也来了，应该做得不错，邻近相识的人，都会让他们来操办，前几年过世的爷爷据说也是他们做的，还有一个村委里的人，原来也是一个村的老相识，大家一起商议奶奶的后事。奶奶是10点多上午走的，应该还是呼吸不行，因为后来看到的死亡证明上，死因是肺部感染。姑姑说，刚看望奶奶走没几分钟，接到了护工通知说不行了。父亲其实也知道奶奶时日不多，最后的一段时间，保守看护，也没准备送医院急救icu啥的插满管子痛苦的活着。我认同。<br><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;中国的社会变革太快，农业时代，工业时代，信息时代，竟然在几十年内完成，这是人类史上的奇迹了，以致现在竟然能看到三个时代的交汇颇有一种魔幻的意味。家在上海外环外，我们俗称乡下人，以前进市区，叫进城。也事实确实如此，我出生时，还住在平房里，户口本上印的居住地是某某镇某某村，村的背后，是农田。种田，烧秸秆，抓蟋蟀，放风筝，玩小鞭炮，都是童年的记忆。现在想来，能活下来真是奇迹，有一个人在冰面上玩，踩破冰面，差点掉水里；有一个人在干涸的湖里玩，一条腿完全陷入淤泥，差点拔不出来；更不用说小学以后骑自行车，不知道调节刹车，但却骑得飞快，在刹车很弱的情况下，和自行车，摩托车，汽车都碰撞过。父母从祖辈传承的是放养带娃，但计划生育一家只有一个，他们并没有意识到，以前的做法孩子多没问题，但只有一个孩子，理应更上点心。<br><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;扯远了，我要说的是即将消失的最后的熟人社会和丧葬的习俗。奶奶那一辈人，一来孩子多，所以亲戚多，二来物质条件艰苦，同村人都要互帮互助。婚丧嫁娶，来帮忙的人，这边称之为“相帮”。来往的多，关系也就要好。不少人得知奶奶过世的消息后，上门拜访。但工业化以后，生活条件改善，家庭逐渐原子化，等奶奶同辈的农业时代的人都离世，熟人社会也会彻底成为历史吧。<br><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;丧葬的习俗，依然保持这农业时代的传统<br><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;摆寿台，餐厅的桌子被移靠到墙边，摆着奶奶的遗像，边上是一个唱经机，循环播放着南无阿弥陀佛，前面摆着肉菜水果。最前面是香炉，香炉里的香至下葬前都不能断。爷爷走时，半小时需要续上，这次更换了粗香，一柱能撑6、7小时，大人们省了不少精神。寿台前面是一个铁制火箱，上层镂空，下层接灰，用来烧锡箔。再往前是一个两个枕头长度的跪垫。侧面拉了一根绳子，上面挂满各色绸带，绸带上是白底黑字的亲友的纸条。<br><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;墙上贴着一张算日子的表格，各种头七，二七，三七、四七，五七，这些日子有各种说法，大体是勿访客，勿游玩，烧锡箔，最后应该是持续一年左右才能最终结束。<br><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;披麻戴孝，初三开始，家里人都穿上麻布衣，腰间扎麻绳，鞋子要穿白鞋字，手臂上用别针别上黑色袖章，女人还会戴一朵白花。还会有伴着唢呐，沿街走一圈的仪式，放原来应该走一个村，现在简单点，出了小区300米左右在河边烧了点锡箔，把沿途手里举的香放进去一起烧。<br><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;烧锡箔，锡箔就是一面涂了锡的薄纸片，用来折叠成各式各样的立体的元宝，小船，莲花，宝匣。我们小辈只会最简单的几种。核心原理是折出来的东西，不要露出没有锡的一面黄纸。这些锡箔，简单的要在各种场合烧，主要是用在寿台前的火箱里，不时得烧一点。复杂的都是按照小辈们不甚了解的规矩折指定的款式和数量，是用在最后葬礼时摆入老人的灵柩和老人一起火化的。<br><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;走掉当天，一楼前的空地，用白粉画上一个圈，扎一个纸人配上锡箔，先烧一轮，留下一滩黄色的痕迹，之后五七啥的还得烧。21年不太平，老人们相继离世，楼下这个圈的痕迹的一个接一个像在接力，不曾完全消失。<br><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;红白宴席，连续三天，早中晚三顿，基本都在镇上提供的比较朴素，但是挺宽敞可以摆几十桌的礼堂举办。由于疫情影响暂不开放，据说在清明前后开放，只得小范围最熟悉的亲友先吃一顿小的，吃两天，桌数也少。<br><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;奶奶走正好挨到春节，殡仪馆休馆，初三在家办仪式，初四在殡仪馆最后落葬。客厅清空了，因为之后还会来很多人，家里本来十几个高的塑料凳，几个矮的塑料凳还不够，借了点来。热水瓶早就不用了，也去借了4个过来应对。自家人从过世当天，家里人，主要是女人，都在叠锡箔。围坐在客厅，或拿个鞋盒盖子，或在小柜子上，或站着在玄关柜上，叠，一个个叠好的锡箔，被扔进了大大小小的纸箱。<br><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;初三当天，烟火缭绕，锡箔不停燃烧混合着男人们抽烟的烟，天气太冷门窗不能开大通风不畅，烟呛人的很，眼睛被熏红，哭不出的人在这个情况下，也很难不掉眼泪，孩子小孩，关在卧室不让出来。前来的亲朋会先给奶奶在香炉里上一柱香，姑父加点锡箔进火箱，伴着姑姑们的哭丧在跪垫上磕个头，立定低头，双手合十，上下摆动三次，跪下磕三次，站起再双手合十摆动三次。男人们在聊天抽烟，客厅里十几个婆婆阿姨在叠锡箔，一叠就是一个下午。烟灰，锡箔屑落了满地。客厅外的阳台上摆了个桌子，给丧葬的工作人员用，有记账的，有的负责统计各类锡箔的完成情况，最主要的是吹唢呐的，从早上8点开始，每隔十几分钟至半小时吹奏一次，震耳欲聋。<br><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;初三当夜，我们轮流守夜，我睡到凌晨3点起来帮忙。晚上有些人家是打牌打麻将的，我们家一边聊天一边叠锡箔。难得这样的相聚，姑姑姑父们互相插科打诨，调侃后半夜在不甚舒适的沙发上睡觉的姑父的呼噜。</p>
<h1 id="葬礼"><a href="#葬礼" class="headerlink" title="葬礼"></a><center>葬礼</center></h1><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;初四葬礼当天，上午和初三一样，磕头，叠锡箔，但远一些的只今天来，人更多了，客厅也更显局促，不少人只得在楼下空地休息。葬礼在下午3点，大部队乘大巴士去，装不下的，分别开了几辆小车去。<br><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;准备进殡仪馆，父亲手举奶奶遗像，小姐姐帮忙撑伞，姑姑妈妈们带上白布条奔丧头饰，家里人共同举起一块白布，伴着唢呐声，来到礼堂门前。随着葬礼主持人的流程，奶奶的棺从一个小门被推了进来。大家都很悲伤，小姑姑尤甚，情绪瞬间崩溃，激动大哭。奶奶牙齿早已掉完显得脸有些凹陷，但遗容还是整理得很安详，大家轮流献花。不善言辞的我，代表家属致辞，紧张得出汗，磕磕绊绊，勉强讲完。礼毕，准备盖棺前，把这两天叠的各式元宝，宝匣，莲花全部塞到棺内，掉落的不可拾起，再将亲朋送来的花圈的花摘下，铺满。全部完成后，准备盖棺仪式，父辈先敲，敲死；我们孙辈三个合敲最后一个钉子，不要敲死。<br><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;完成后，奶奶就送去火化了，父亲要带着大部队回去，我和大姑父留下来，等待火化完成。我不是一个很理性的人，但等在火化室的门外，还是忍不住思绪万千。想着，爷爷奶奶的离世，代表着我对于死亡的概念不再是文学作品中的体悟。想着，父母离世时，老一辈们早已离世，农业时代传统消失后的丧事会如何进行。想着，自己的孩子，如果和父母那辈一样有兄弟姐妹，会不会比起未来将要独自操办葬礼的自己，轻松一点，有人分担。明明结婚五年才生了娃，是身边人中的异类了，因为我们知道现在生孩子不像以前，只是添一双筷子那么简单。对我们是不小的压力，对于他是未来可以预见的激烈竞争。但生了孩子以后，一切问题只能迎难而上，一个兄弟姐妹可能是我们给他最好的礼物。<br><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;晃过神来，火化师傅开门示意我们进去。上次爷爷的骨灰也是我来接的，上次没有准备，来不及反应被震惊到了一下。这次知道会发生什么，进去前的等待反而更加心悸。骨灰炉的热气喷出，托盘进入时一满满当当的灵柩，出来时只剩一盘灰烬和骨头的混合物。骨灰名字让人以为他是灰尘状的，影视作品中，出现骨灰的镜头也是粉末状的，但真实的情况是从各种东西烧成的灰里拣出还有形但是已经脆化轻轻一碰就破碎的骨头。师傅给我们递来两双长的筷子，让我们“拣骨”，就是把骨头夹出来放在准备好的不锈钢方槽里。夹两块表示以后，后面就是师傅自己处理了。他带着隔热手套，快速地由按照从脚到头的顺序把骨头拾起。一边拾，一边把不小心带进的杂物取出。看着头骨被师傅不甚温柔的放进方槽，心里一疼，但还没结束。最后，把方槽放上一边的桌子，用橡胶锤把烧的脆脆的骨头压一压，滚一滚。左侧是一个不锈钢的架子，架着一个不锈钢漏斗。师傅熟练的拿出一个红色骨灰袋套在漏斗下，右手把骨头碎片倒入漏斗，给袋收口，入骨灰盒。<br><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;接过骨灰盒，走出火化室，我知道尘归尘土归土，虽然之后的仪式还会有，但奶奶人生的旅途，到这里已经彻底走完了。不知是骨灰盒里的余热，还是感觉奶奶回到了身边。抱在胸前的盒子，似乎有一些暖意，这股暖意冲上了头脑，窜进了眼里，化为滚烫的泪流淌出来。<br><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;跟着指引我们来到骨灰寄存室，准备寄存骨灰。手续提前办理好了，主要就是选格子，与成人头部齐平的，和最上或者最下的有将近一倍的差价，人死了，还是逃不过被划分等级。我们在启东有亲戚，父亲提前在启东一隅帮爷爷奶奶购置好了墓地，爷爷几年前下葬了，奶奶等到合适时间就能去陪他了。</p>
<h1 id="结束与开始"><a href="#结束与开始" class="headerlink" title="结束与开始"></a><center>结束与开始</center></h1><p>不会写文，思绪万千付诸笔端却似一滩死水，毫无波澜。自高考结束，就没写过如此长的文字。是为纪念，也为了更好的开始。奶奶祝你一路走好。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wws563.github.io/2021/02/01/sum-1-2-3-%E4%B8%8E%E5%87%BD%E6%95%B0%E6%9F%AF%E9%87%8C%E5%8C%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/author.jpg">
      <meta itemprop="name" content="E1son">
      <meta itemprop="description" content="#1 - The first rule of Fight Club is, you do not talk about Fight Club.<br/> #2 - The second rule of Fight Club is, you DO NOT talk about Fight Club.<br/> #3 - If someone says stop, goes limp, taps out, the fight is over.<br/> #4 - Two guys to a fight.<br/> #5 - One fight at a time.<br/> #6 - No shirts, no shoes.<br/> #7 - Fights will go on as long as they have to.<br/> #8 - If this is your first night at Fight Club, you have to fight.<br/>">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FightClub">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/01/sum-1-2-3-%E4%B8%8E%E5%87%BD%E6%95%B0%E6%9F%AF%E9%87%8C%E5%8C%96/" class="post-title-link" itemprop="url">sum(1,2)(3)与函数柯里化</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-02-01 16:34:59" itemprop="dateCreated datePublished" datetime="2021-02-01T16:34:59+08:00">2021-02-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-02 01:17:03" itemprop="dateModified" datetime="2021-02-02T01:17:03+08:00">2021-02-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/js%E5%9F%BA%E7%A1%80/" itemprop="url" rel="index"><span itemprop="name">js基础</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2021/02/01/sum-1-2-3-%E4%B8%8E%E5%87%BD%E6%95%B0%E6%9F%AF%E9%87%8C%E5%8C%96/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2021/02/01/sum-1-2-3-%E4%B8%8E%E5%87%BD%E6%95%B0%E6%9F%AF%E9%87%8C%E5%8C%96/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><img src="http://fightclub.myds.me:10000/images/2021/02/01/u239454488326712715fm26gp0.jpg" alt="&#39;库里&#39;化.jpg"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">题目 </span><br><span class="line">编写一个方法sum，使sum(1,2,3) 和 sum(1,2)(3)的输出都为6</span><br></pre></td></tr></table></figure>

<p>感谢前人指路——<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/2975c25e4d71">详解JS函数柯里化</a></p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>这道题目考的是<strong>函数柯里化</strong>的概念</p>
<blockquote>
<p>柯里化，英语：Currying(果然是满满的英译中的既视感)，是把接受多个参数的函数变换成接受一个单一参数（最初函数的第一个参数）的函数，并且返回接受余下的参数而且返回结果的新函数的技术。</p>
</blockquote>
<p>看概念，云里雾里，上例子！</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 普通的add函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Currying后</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">curryingAdd</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">y</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> x + y</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">add(<span class="number">1</span>, <span class="number">2</span>)     <span class="comment">// 3</span></span><br><span class="line">curryingAdd(<span class="number">1</span>)(<span class="number">2</span>)   <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>
<p>看了例子，主要概念就是让函数返回一个function可以接受第二个（或者更多）括号里的参数并输出期望值。</p>
<h2 id="思考"><a href="#思考" class="headerlink" title="思考"></a>思考</h2><p>针对这个题目，需要做的是：<br>1、利用闭包创建一个数组保存参数<br>2、返回一个方法，用于接收下一个括号里的参数<br>3、全部接收后，返回所有参数的和</p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><h3 id="限定参数数量"><a href="#限定参数数量" class="headerlink" title="限定参数数量"></a>限定参数数量</h3><p>如果仅仅针对题目，我们得到下面的代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 固定数量参数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">constSum</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 因为就三个参数，直接用计数器，定义数组添加参数，判断数组长度也可以</span></span><br><span class="line">    (<span class="built_in">this</span>.counter = <span class="number">0</span>), (<span class="built_in">this</span>.sumNum = <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">let</span> that = <span class="built_in">this</span>;</span><br><span class="line">    </span><br><span class="line"><span class="comment">// ...rest是ES6中参数解构的写法，函数中的rest为数组</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">innerSum</span>(<span class="params">...rest</span>) </span>&#123;</span><br><span class="line">        rest.forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">            that.counter++;</span><br><span class="line">            that.sumNum += item;</span><br><span class="line">        &#125;);</span><br><span class="line">      <span class="comment">// 判断</span></span><br><span class="line">        <span class="keyword">if</span> (that.counter === <span class="number">3</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> that.sumNum;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> innerSum;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sum = <span class="keyword">new</span> constSum();</span><br><span class="line"><span class="keyword">var</span> result = sum(<span class="number">1</span>, <span class="number">2</span>)(<span class="number">3</span>);</span><br><span class="line"><span class="keyword">var</span> result2= sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"><span class="built_in">console</span>.log(result); <span class="comment">// 6  </span></span><br><span class="line"><span class="built_in">console</span>.log(resul2); <span class="comment">// 6</span></span><br></pre></td></tr></table></figure>

<p>这样可以实现题目中的效果，但是并不好，因为限定死3个参数，如果我们希望拥有更灵活通用的方法呢？<br>比如可以支持sum(1,2,3)(4)(5)……</p>
<h3 id="不限定参数数量"><a href="#不限定参数数量" class="headerlink" title="不限定参数数量"></a>不限定参数数量</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 不限数量参数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">...rest</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 第一次执行时，定义一个数组专门用来存储所有的参数</span></span><br><span class="line">  <span class="keyword">var</span> _args = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>); </span><br><span class="line"></span><br><span class="line">  <span class="comment">// 在内部声明一个函数，利用闭包的特性保存_args并收集所有的参数值</span></span><br><span class="line">   <span class="keyword">var</span> _adder = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">       _args.push(...arguments); </span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> _adder;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 利用toString隐式转换的特性，当最后执行时隐式转换，并计算最终的值返回</span></span><br><span class="line">  _adder.toString = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> sum = _args.reduce(<span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> a + b;</span><br><span class="line">  &#125;);</span><br><span class="line">      <span class="keyword">return</span> sum</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> _adder;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(sum(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>))              <span class="comment">// 6</span></span><br><span class="line"><span class="built_in">console</span>.log(sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)(<span class="number">4</span>))             <span class="comment">// 10</span></span><br><span class="line"><span class="built_in">console</span>.log(sum(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>)(<span class="number">4</span>)(<span class="number">5</span>))        <span class="comment">// 15</span></span><br></pre></td></tr></table></figure>
<p>以上可以实现不限定参数数量的sum函数。<br>其中<code>Array.prototype.slice.call</code>和<code>toString隐式转换</code>其实都是js基础知识点，具体可以另开两篇文章。<br>但是这里先明白其功能——<br>一个是将参数转换为数组。<br>一个是在返回最后一次执行结束后，return了一个_adder方法，在输出时，正常会<code>隐式调用</code>Function.toString的方法，以字符方式输出方法。因为上面改写了_adder的toString方法，所以最后没有<code>以字符方式输出方法</code>，而是隐式调用了我们改写的<code>输出了所有参数的和</code>的toString方法。<br>这样的方法在chrome可以输出<code>f 6</code>这样的数字，但如果输出一下这个结果的类型比如——</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...上略</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> sum(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>))              <span class="comment">// function</span></span><br></pre></td></tr></table></figure>
<p>我们会得到这个结果的类型其实还是function。所以这个方法其实是很勉强的实现了题目的效果，但得到的数据不能直接作为Number来使用。<br>还是需要<code>显示调用</code>才能得到number类型的结果——</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...上略</span></span><br><span class="line"><span class="keyword">let</span> sumToNumber = <span class="built_in">Number</span>.parseInt(sum(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>))</span><br><span class="line"><span class="built_in">console</span>.log(sumToNumber)              <span class="comment">// 6</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> sumToNumber)              <span class="comment">// number</span></span><br></pre></td></tr></table></figure>
<h2 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h2><h3 id="ES6改写"><a href="#ES6改写" class="headerlink" title="ES6改写"></a>ES6改写</h3><p>使用<a target="_blank" rel="noopener" href="https://es6.ruanyifeng.com/#docs/function#rest-%E5%8F%82%E6%95%B0">ES6的不定参数rest</a>的新特性，该特性可以让<code>不定参数</code>变成一个<code>数组</code>传入，不需要访问<code>arguments</code>，也省去了使用<code>Array.prototype.slice.call(arguments); </code>生成数组，更加优雅。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sumWithES6</span>(<span class="params">...rest</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> _args = rest;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> _adder = <span class="function"><span class="keyword">function</span> (<span class="params">...innerRest</span>) </span>&#123;</span><br><span class="line">        _args.push(...innerRest); <span class="comment">// 这里使用的是ES6数组的解构</span></span><br><span class="line">        <span class="keyword">return</span> _adder;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    _adder.toString = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> sum = _args.reduce(<span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> a + b;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> _adder;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(sumWithES6(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>)); <span class="comment">// 6</span></span><br></pre></td></tr></table></figure>





      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wws563.github.io/2021/01/21/hot-potato/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/author.jpg">
      <meta itemprop="name" content="E1son">
      <meta itemprop="description" content="#1 - The first rule of Fight Club is, you do not talk about Fight Club.<br/> #2 - The second rule of Fight Club is, you DO NOT talk about Fight Club.<br/> #3 - If someone says stop, goes limp, taps out, the fight is over.<br/> #4 - Two guys to a fight.<br/> #5 - One fight at a time.<br/> #6 - No shirts, no shoes.<br/> #7 - Fights will go on as long as they have to.<br/> #8 - If this is your first night at Fight Club, you have to fight.<br/>">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FightClub">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/21/hot-potato/" class="post-title-link" itemprop="url">用Javascript实现击鼓传花游戏</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-01-21 22:43:14 / 修改时间：22:45:30" itemprop="dateCreated datePublished" datetime="2021-01-21T22:43:14+08:00">2021-01-21</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/js%E5%9F%BA%E7%A1%80/" itemprop="url" rel="index"><span itemprop="name">js基础</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2021/01/21/hot-potato/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2021/01/21/hot-potato/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>题目为击鼓传花游戏，在这个游戏中，孩子们围成一个圆圈，把花尽快地传递给旁边的人。某一时刻传花停止，这个时候花在谁手里，谁就退出圆圈结束游戏。重复这个过程，直到只剩一个孩子（胜者）。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 需要思考passGame如何写</span><br><span class="line">var names &#x3D; [&quot;John&quot;, &quot;Jack&quot;, &quot;Camila&quot;, &quot;Ingrid&quot;, &quot;Carl&quot;];</span><br><span class="line">var endName &#x3D; passGame(names, 8); &#x2F;&#x2F; 数到 8 的人淘汰</span><br><span class="line">console.log(&quot;最终留下:&quot; + endName); &#x2F;&#x2F; &#39;john&#39;</span><br></pre></td></tr></table></figure>

<h2 id="思考"><a href="#思考" class="headerlink" title="思考"></a>思考</h2><p>先尝试自己思考，用我愚蠢的脑瓜想出来两个解决方案</p>
<h5 id="方案一"><a href="#方案一" class="headerlink" title="方案一"></a>方案一</h5><p>用变量now代表当前的列表索引位置，max代表数组长度，interval代表数到几淘汰，counter代表计数器每次到8清零。循环使用splice删除元素。最后得到胜利者。</p>
<h5 id="方案二"><a href="#方案二" class="headerlink" title="方案二"></a>方案二</h5><p>用变量now代表索引位置，使用模计算，8%5余3，删除第三个，然后记录新的索引位置，8%4余0，删除最后一个…最后得到胜利者。</p>
<p>但以上两种方案，对于now的控制很麻烦，虽然都可以完成题目，但是变量变化以后非常容易出错。并不是好的解决方案。</p>
<h2 id="学习"><a href="#学习" class="headerlink" title="学习"></a>学习</h2><p>寻找答案后，这题考的是队列的使用。<br><a target="_blank" rel="noopener" href="https://www.freesion.com/article/7708838573/">队列：优先队列+循环队列（击鼓传花算法）</a><br>感谢大佬的分享</p>
<h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><p>学习了队列的概念</p>
<blockquote>
<p>队列是遵循FIFO（First In First Out，先进先出，也称为先来先服务）原则的一组有序的项。队列在尾部添加新元素，并从顶部移除元素。最新添加的元素必须排在队列的末尾。</p>
</blockquote>
<p>该问题的解决思路也就很简单了，计数的同时，把队首的元素移动到队尾，计数器到了指定的数，就删除队首，循环这个操作，直到队列长度为1即可。这样就不会出现上面now定位不准确的问题。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义队列类</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Queue</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.list = [];</span><br><span class="line"><span class="comment">// add-在队尾添加</span></span><br><span class="line">  <span class="built_in">this</span>.add = <span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.list.push(item);</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="comment">// del-从队首删除，并返回删除的值</span></span><br><span class="line">  <span class="built_in">this</span>.del = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.list.shift();</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="comment">// size-返回队列长度</span></span><br><span class="line">  <span class="built_in">this</span>.size = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.list.length;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 游戏逻辑</span></span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">passGame</span>(<span class="params">nameList, interval</span>) </span>&#123;</span><br><span class="line">        <span class="comment">//  声明实例和幸存者</span></span><br><span class="line">	<span class="keyword">let</span> q = <span class="keyword">new</span> Queue() , eliminated = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="comment">// 给实例中的队列赋值</span></span><br><span class="line">        q.list = nameList;</span><br><span class="line">        <span class="comment">// 当队列长度大于1时执行</span></span><br><span class="line">	<span class="keyword">while</span> (q.size() &gt; <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="comment">// 开始计数，每次把队首元素移动到队尾</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; interval; j++) &#123;</span><br><span class="line">			q.add(q.del());</span><br><span class="line">		&#125;</span><br><span class="line">                <span class="comment">// 到达指定数量，删除当前元素。</span></span><br><span class="line">                eliminated = q.del() </span><br><span class="line">		<span class="built_in">console</span>.log(eliminated + <span class="string">&quot;被淘汰&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">        <span class="comment">// 最后返回幸存者</span></span><br><span class="line">	<span class="keyword">return</span> q.list[<span class="number">0</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> names = [<span class="string">&quot;Yimiao&quot;</span>, <span class="string">&quot;Jack&quot;</span>, <span class="string">&quot;Camila&quot;</span>, <span class="string">&quot;Ingrid&quot;</span>, <span class="string">&quot;Carl&quot;</span>];</span><br><span class="line">  <span class="keyword">var</span> endName = passGame(names, <span class="number">8</span>); <span class="comment">// 数到 8 的人淘汰</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;最终留下:&quot;</span> + endName); <span class="comment">// &#x27;Yimiao&#x27;</span></span><br><span class="line"><span class="keyword">var</span> names = [<span class="string">&quot;John&quot;</span>, <span class="string">&quot;Jack&quot;</span>, <span class="string">&quot;Camila&quot;</span>, <span class="string">&quot;Ingrid&quot;</span>, <span class="string">&quot;Carl&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> endName = passGame(names, <span class="number">8</span>); <span class="comment">// 数到 8 的人淘汰</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;最终留下:&quot;</span> + endName); <span class="comment">// &#x27;john&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Camila被淘汰</span></span><br><span class="line"><span class="comment">// Jack被淘汰</span></span><br><span class="line"><span class="comment">// Carl被淘汰</span></span><br><span class="line"><span class="comment">// Ingrid被淘汰</span></span><br><span class="line"><span class="comment">// 最终留下:Yimiao</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wws563.github.io/2021/01/05/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9F%9F%E5%90%8D%E4%B8%AA%E6%80%A7%E5%8C%96%E5%9F%9F%E5%90%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/author.jpg">
      <meta itemprop="name" content="E1son">
      <meta itemprop="description" content="#1 - The first rule of Fight Club is, you do not talk about Fight Club.<br/> #2 - The second rule of Fight Club is, you DO NOT talk about Fight Club.<br/> #3 - If someone says stop, goes limp, taps out, the fight is over.<br/> #4 - Two guys to a fight.<br/> #5 - One fight at a time.<br/> #6 - No shirts, no shoes.<br/> #7 - Fights will go on as long as they have to.<br/> #8 - If this is your first night at Fight Club, you have to fight.<br/>">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FightClub">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/05/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9F%9F%E5%90%8D%E4%B8%AA%E6%80%A7%E5%8C%96%E5%9F%9F%E5%90%8D/" class="post-title-link" itemprop="url">github page+hexo自定义个性化域名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-05 21:42:32" itemprop="dateCreated datePublished" datetime="2021-01-05T21:42:32+08:00">2021-01-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-01-06 23:48:52" itemprop="dateModified" datetime="2021-01-06T23:48:52+08:00">2021-01-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%9D%82%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">杂记</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2021/01/05/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9F%9F%E5%90%8D%E4%B8%AA%E6%80%A7%E5%8C%96%E5%9F%9F%E5%90%8D/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2021/01/05/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9F%9F%E5%90%8D%E4%B8%AA%E6%80%A7%E5%8C%96%E5%9F%9F%E5%90%8D/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><img src="http://fightclub.myds.me:10000/images/2021/01/05/20278264-f9c585bb4123d290.jpg"></p>
<blockquote>
<p>会者不难，难者不会</p>
</blockquote>
<p>我的博客，欢迎去逛逛<a target="_blank" rel="noopener" href="http://yimiao.space/">yimiao.space</a></p>
<p>在准备好创建自己的博客以后，从github注册，到各种认证，到git管理代码库，到博客选型选到Hexo，从0开始建立了一个博客，到多地部署，自定义主题功能。算是有了个样子，但是却一直卡在自定义域名，找了半天没找到怎么配置。虽然<a target="_blank" rel="noopener" href="http://yimiao.space/">wws563.github.io</a>这样的域名看着还行了，但总是缺点意思。</p>
<p>想着自定义域名，但是却死活找不到教程，国内的教程大都提示要备案，国外的网站买好了域名不知道咋配。买好了域名却没用，隔了一段时间，今天忽然搜到了解决方案，原来简单到和把大象放进冰箱差不多。</p>
<p>感谢这个<a target="_blank" rel="noopener" href="https://www.zhihu.com/question/31377141/answer/87541858">知乎答案</a>  <del>我tm怎么早没想到去知乎搜一下</del></p>
<p>首先，因为github page是在国外所以域名不需要备案，我是腾讯云买的域名，同理阿里或者其他服务商的也不需要。这就省了很多事了。<del>腾讯云备案还要买服务器，还好我没买</del>。<br>然后是步骤：</p>
<ol>
<li><p>用任何方式在博客生成后，在用于部署的publish根目录下添加一个无后缀的<code>CNAME</code>文件（<strong>文件名大写</strong>），里面写一行，你的自定义域名，比如我的是<code>yimiao.space</code>，不需要<code>http</code>也不需要<code>www</code>。这样，github page就可以识别你的自定义域名了。<br> 我用的是Hexo，方法是在源文件的<code>source</code>文件夹里添加<code>CNAME</code>文件，生成后，就会自动出现在publish里。<br><img src="http://fightclub.myds.me:10000/images/2021/01/05/_20210105213404.png" alt="publish文件夹"></p>
</li>
<li><p>购买域名，进入你买的域名管理界面，在里面添加两条记录。一个www，一个@。记录类型改为CNAME，然后记录值改为自己的githubpage地址。<br><img src="http://fightclub.myds.me:10000/images/2021/01/05/20278264-56a85f43365bff82.png" alt="域名解析设置"></p>
</li>
<li><p>修改完以后，等待几分钟dns解析，期间可以尝试用cmd，ping一下博客地址和自定义域名地址，看是否指向同一个ip，如果是同一个应该就没问题。至此，大功告成！可以通过自定义域名访问到github page了~</p>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wws563.github.io/2020/12/30/%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AALazyMan/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/author.jpg">
      <meta itemprop="name" content="E1son">
      <meta itemprop="description" content="#1 - The first rule of Fight Club is, you do not talk about Fight Club.<br/> #2 - The second rule of Fight Club is, you DO NOT talk about Fight Club.<br/> #3 - If someone says stop, goes limp, taps out, the fight is over.<br/> #4 - Two guys to a fight.<br/> #5 - One fight at a time.<br/> #6 - No shirts, no shoes.<br/> #7 - Fights will go on as long as they have to.<br/> #8 - If this is your first night at Fight Club, you have to fight.<br/>">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FightClub">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/30/%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AALazyMan/" class="post-title-link" itemprop="url">实现一个LazyMan</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-12-30 09:36:20" itemprop="dateCreated datePublished" datetime="2020-12-30T09:36:20+08:00">2020-12-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-01-03 13:31:04" itemprop="dateModified" datetime="2021-01-03T13:31:04+08:00">2021-01-03</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/js%E5%9F%BA%E7%A1%80/" itemprop="url" rel="index"><span itemprop="name">js基础</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/12/30/%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AALazyMan/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/12/30/%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AALazyMan/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><p>看到如下的一道题目，有点意思。一道题目包含了很多重要的 JS 知识点：<strong>this 指向，闭包，<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/139210791">事件轮询</a>，链式调用，队列等。</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">实现一个LazyMan，可以按照以下方式调用:</span><br><span class="line">LazyMan(“Hank”)输出:</span><br><span class="line">Hi! This is Hank!</span><br><span class="line"></span><br><span class="line">LazyMan(“Hank”).sleep(<span class="number">10</span>).eat(“dinner”)输出</span><br><span class="line">Hi! This is Hank!</span><br><span class="line"><span class="comment">//等待10秒..</span></span><br><span class="line">Wake up after <span class="number">10</span></span><br><span class="line">Eat dinner~</span><br><span class="line"></span><br><span class="line">LazyMan(“Hank”).eat(“dinner”).eat(“supper”)输出</span><br><span class="line">Hi This is Hank!</span><br><span class="line">Eat dinner~</span><br><span class="line">Eat supper~</span><br><span class="line"></span><br><span class="line">LazyMan(“Hank”).sleepFirst(<span class="number">5</span>).eat(“supper”)输出</span><br><span class="line"><span class="comment">//等待5秒</span></span><br><span class="line">Wake up after <span class="number">5</span></span><br><span class="line">Hi This is Hank!</span><br><span class="line">Eat supper</span><br><span class="line">以此类推。</span><br></pre></td></tr></table></figure>

<h2 id="思考"><a href="#思考" class="headerlink" title="思考"></a>思考</h2><ol>
<li>为了链式调用，每个方法都需要返回 this。</li>
<li>任务顺序需要使用队列来确认执行顺序</li>
<li>直接执行 LazyMan 就有输出，说明在构造时(constructor)就执行了输出，但 sleepFirst 可能先于这个输出，所以需要使用 settimeout，利用 Js 的轮询机制，在主任务执行完毕后，调用 next 方法开始执行任务队列。</li>
</ol>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p>有了思路，就可以着手写代码，详见注释。</p>
<h5 id="1-ES5-prototype-原型链"><a href="#1-ES5-prototype-原型链" class="headerlink" title="1. ES5 prototype 原型链"></a>1. ES5 prototype 原型链</h5><p>关键点在代码中注释。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义_LazyMan构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_LazyMan</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> that = <span class="built_in">this</span>; <span class="comment">// 定义that保存this，在返回的方法，或settimeout上下文环境变化的情况下，保证this指向正确</span></span><br><span class="line">  <span class="built_in">this</span>.tasks = []; <span class="comment">// 创建一个执行队列</span></span><br><span class="line">  <span class="built_in">this</span>.tasks.push(</span><br><span class="line">    (<span class="function">(<span class="params">n</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 将方法push进执行队列</span></span><br><span class="line">      <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;Hi,this is &quot;</span> + n + <span class="string">&quot;!&quot;</span>);</span><br><span class="line">        that.next(); <span class="comment">// 队列中的每个方法执行完毕后，执行next方法执行队列中下一个方法</span></span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;)(name)</span><br><span class="line">  ); <span class="comment">// 立即执行函数，可以返回一个带参数的function。</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    that.next();</span><br><span class="line">  &#125;, <span class="number">0</span>); <span class="comment">// settimeout可以让所有的链式方法执行完毕后，再开始执行队列。</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用prototype绑定方法，实现LazyMan.func()形式的调用</span></span><br><span class="line">_LazyMan.prototype.next = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> fn = <span class="built_in">this</span>.tasks.shift(); <span class="comment">// 使用Array的shift方法，从队列中取出第一个值，队列也会相应缩短</span></span><br><span class="line">  fn &amp;&amp; fn(); <span class="comment">// 如果取得到方法，则执行。</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">_LazyMan.prototype.eat = <span class="function"><span class="keyword">function</span> (<span class="params">food</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> that = <span class="built_in">this</span>;</span><br><span class="line">  <span class="keyword">var</span> fn = (<span class="function">(<span class="params">f</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;I eated &quot;</span> + f + <span class="string">&quot;!&quot;</span>);</span><br><span class="line">      that.next();</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;)(food);</span><br><span class="line">  <span class="built_in">this</span>.tasks.push(fn);</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">_LazyMan.prototype.sleep = <span class="function"><span class="keyword">function</span> (<span class="params">delay</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> that = <span class="built_in">this</span>;</span><br><span class="line">  <span class="keyword">var</span> fn = (<span class="function">(<span class="params">d</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;I sleeped &quot;</span> + d / <span class="number">1000</span> + <span class="string">&quot;s&quot;</span>);</span><br><span class="line">        that.next();</span><br><span class="line">      &#125;, d);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;)(delay);</span><br><span class="line">  <span class="built_in">this</span>.tasks.push(fn);</span><br><span class="line">  <span class="keyword">return</span> that;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">_LazyMan.prototype.sleepFirst = <span class="function"><span class="keyword">function</span> (<span class="params">delay</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> that = <span class="built_in">this</span>;</span><br><span class="line">  <span class="keyword">var</span> fn = (<span class="function">(<span class="params">d</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;At first! sleep &quot;</span> + d / <span class="number">1000</span> + <span class="string">&quot;s&quot;</span>);</span><br><span class="line">        that.next();</span><br><span class="line">      &#125;, d);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;)(delay);</span><br><span class="line">  <span class="built_in">this</span>.tasks.unshift(fn); <span class="comment">//!! sleepFirst比较特殊，使用unshift把方法添加到队列最前，从而实现首先执行。</span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 工厂模式返回LazyMan</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">LazyMan</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> _LazyMan(name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">LazyMan(<span class="string">&quot;Eason&quot;</span>).sleep(<span class="number">1000</span>).eat(<span class="string">&quot;fish&quot;</span>).eat(<span class="string">&quot;egg&quot;</span>).sleep(<span class="number">500</span>);</span><br><span class="line"><span class="comment">// At first! sleep 1s</span></span><br><span class="line"><span class="comment">// Hi,this is Eason!</span></span><br><span class="line"><span class="comment">// I eated fish!</span></span><br><span class="line"><span class="comment">// I eated egg!</span></span><br><span class="line"><span class="comment">// I sleeped 0.5s</span></span><br></pre></td></tr></table></figure>

<h5 id="2-ES6-Class-改写"><a href="#2-ES6-Class-改写" class="headerlink" title="2. ES6 Class 改写"></a>2. ES6 Class 改写</h5><p>用 ES6 的 Class 特性修改明显变优雅很多。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_LazyMan</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">    <span class="keyword">let</span> that = <span class="built_in">this</span>;</span><br><span class="line">    (<span class="built_in">this</span>.tasks = []),</span><br><span class="line">      (<span class="built_in">this</span>.fn = (<span class="function">(<span class="params">n</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">&quot;this is &quot;</span> + n + <span class="string">&quot;!(By Class)&quot;</span>);</span><br><span class="line">          that.next();</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;)(name));</span><br><span class="line">    <span class="built_in">this</span>.tasks.push(<span class="built_in">this</span>.fn);</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      that.next();</span><br><span class="line">    &#125;, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  next() &#123;</span><br><span class="line">    <span class="keyword">var</span> fn = <span class="built_in">this</span>.tasks.shift();</span><br><span class="line">    fn &amp;&amp; fn();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  eat(food) &#123;</span><br><span class="line">    <span class="keyword">let</span> fn = (<span class="function">(<span class="params">f</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;eat &quot;</span> + f);</span><br><span class="line">        <span class="built_in">this</span>.next();</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;)(food);</span><br><span class="line">    <span class="built_in">this</span>.tasks.push(fn);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  sleep(delay, immedia = <span class="literal">false</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> that = <span class="built_in">this</span>;</span><br><span class="line">    <span class="keyword">let</span> fn = (<span class="function">(<span class="params">d, i</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;i ? <span class="string">&quot;sleepFisrt &quot;</span> : <span class="string">&quot;sleep &quot;</span>&#125;</span>`</span> + d / <span class="number">1000</span> + <span class="string">&quot;s&quot;</span>);</span><br><span class="line">          that.next();</span><br><span class="line">        &#125;, d);</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;)(delay, immedia);</span><br><span class="line">    immedia ? <span class="built_in">this</span>.tasks.unshift(fn) : <span class="built_in">this</span>.tasks.push(fn);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  sleepFirst(delay) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.sleep(delay, <span class="literal">true</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> LazyMan = <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> _LazyMan(name);</span><br><span class="line">&#125;;</span><br><span class="line">LazyMan(<span class="string">&quot;&quot;</span>).eat(<span class="string">&quot;fish&quot;</span>).sleepFirst(<span class="number">1000</span>).sleep(<span class="number">2000</span>);</span><br></pre></td></tr></table></figure>

<h5 id="3-Promise-实现"><a href="#3-Promise-实现" class="headerlink" title="3. Promise 实现"></a>3. Promise 实现</h5><p>队列执行任务，Promise 也有类似的属性，尝试用 Promise 实现。<br>参考：<a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903496433532935#heading-3">如何实现一个 LazyMan</a><br>这个文章里的例子有小错误，修改后如下。用 Promise 实现 LazyMan 没有发挥 Promise 对于异步链式操作的方便性，反而让逻辑看起来很复杂，能实现，但并不好。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_LazyMan</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.orderPromise = <span class="built_in">this</span>.newPromise(); <span class="comment">// 定义顺序promise对象</span></span><br><span class="line">  <span class="built_in">this</span>.insertPromise = <span class="built_in">this</span>.newPromise(); <span class="comment">// 定义插入promise对象</span></span><br><span class="line">  <span class="built_in">this</span>.order(<span class="function"><span class="keyword">function</span> (<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(name);</span><br><span class="line">    resolve();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">_LazyMan.prototype = &#123;</span><br><span class="line">  <span class="comment">/*实例化promise对象工厂*/</span></span><br><span class="line">  newPromise: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">      resolve();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  order: <span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="built_in">this</span>;</span><br><span class="line">    <span class="built_in">this</span>.orderPromise = <span class="built_in">this</span>.orderPromise.then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">        <span class="comment">//如果有insertPromise,阻塞orderPromise.</span></span><br><span class="line">        <span class="keyword">if</span> (self.fir) &#123;</span><br><span class="line">          self.insertPromise.then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            fn(resolve);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          fn(resolve);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  insert: <span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="built_in">this</span>;</span><br><span class="line">    <span class="built_in">this</span>.fir = <span class="literal">true</span>;</span><br><span class="line">    <span class="built_in">this</span>.insertPromise = <span class="built_in">this</span>.insertPromise.then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">        fn(resolve);</span><br><span class="line">        self.fir = <span class="literal">false</span>;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  firstTime: <span class="function"><span class="keyword">function</span> (<span class="params">time</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> fn = <span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;wait &quot;</span> + time + <span class="string">&quot; s,other logic&quot;</span>);</span><br><span class="line">        resolve();</span><br><span class="line">      &#125;, time * <span class="number">1000</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">this</span>.insert(fn);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  eat: <span class="function"><span class="keyword">function</span> (<span class="params">something</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> fn = <span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(something + <span class="string">&quot; ~~&quot;</span>);</span><br><span class="line">      resolve();</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">this</span>.order(fn);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  sleep: <span class="function"><span class="keyword">function</span> (<span class="params">time</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> fn = <span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;sleep &quot;</span> + time + <span class="string">&quot; s&quot;</span>);</span><br><span class="line">        resolve();</span><br><span class="line">      &#125;, time * <span class="number">1000</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">this</span>.order(fn);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//接口封装。</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">LazyMan</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> _LazyMan(name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//调用测试</span></span><br><span class="line">LazyMan(<span class="string">&quot;RoryWu&quot;</span>).sleep(<span class="number">2</span>).eat(<span class="string">&quot;dinner&quot;</span>).eat(<span class="string">&quot;breakfast&quot;</span>);</span><br><span class="line"><span class="comment">// 弹出：</span></span><br><span class="line"><span class="comment">// wait 1 s, other logic</span></span><br><span class="line"><span class="comment">// wait 3 s, other logic</span></span><br><span class="line"><span class="comment">// RoryWu</span></span><br><span class="line"><span class="comment">// sleep 2 s</span></span><br><span class="line"><span class="comment">// dinner~~</span></span><br><span class="line"><span class="comment">// breakfast~~</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wws563.github.io/2020/12/01/%E7%AE%97%E6%B3%95%E7%BB%83%E4%B9%A0%E4%B9%8B%E6%8E%92%E5%BA%8F%EF%BC%8C%E5%86%92%E6%B3%A1%EF%BC%8C%E6%8F%92%E5%85%A5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/author.jpg">
      <meta itemprop="name" content="E1son">
      <meta itemprop="description" content="#1 - The first rule of Fight Club is, you do not talk about Fight Club.<br/> #2 - The second rule of Fight Club is, you DO NOT talk about Fight Club.<br/> #3 - If someone says stop, goes limp, taps out, the fight is over.<br/> #4 - Two guys to a fight.<br/> #5 - One fight at a time.<br/> #6 - No shirts, no shoes.<br/> #7 - Fights will go on as long as they have to.<br/> #8 - If this is your first night at Fight Club, you have to fight.<br/>">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FightClub">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/01/%E7%AE%97%E6%B3%95%E7%BB%83%E4%B9%A0%E4%B9%8B%E6%8E%92%E5%BA%8F%EF%BC%8C%E5%86%92%E6%B3%A1%EF%BC%8C%E6%8F%92%E5%85%A5/" class="post-title-link" itemprop="url">算法练习之排序、冒泡、插入</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-12-01 14:48:47" itemprop="dateCreated datePublished" datetime="2020-12-01T14:48:47+08:00">2020-12-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-02 21:50:46" itemprop="dateModified" datetime="2020-12-02T21:50:46+08:00">2020-12-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" itemprop="url" rel="index"><span itemprop="name">计算机基础</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/12/01/%E7%AE%97%E6%B3%95%E7%BB%83%E4%B9%A0%E4%B9%8B%E6%8E%92%E5%BA%8F%EF%BC%8C%E5%86%92%E6%B3%A1%EF%BC%8C%E6%8F%92%E5%85%A5/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/12/01/%E7%AE%97%E6%B3%95%E7%BB%83%E4%B9%A0%E4%B9%8B%E6%8E%92%E5%BA%8F%EF%BC%8C%E5%86%92%E6%B3%A1%EF%BC%8C%E6%8F%92%E5%85%A5/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="概念介绍"><a href="#概念介绍" class="headerlink" title="概念介绍"></a>概念介绍</h1><p><a href="/2020/10/20/%E7%AE%97%E6%B3%95%E5%A1%AB%E5%9D%91">算法总集篇点这里→</a></p>
<p>排序、冒泡、插入三种算法，是基础的算法，复杂度相对较高，效率比较一般。<br>根据<a target="_blank" rel="noopener" href="https://blog.csdn.net/alzzw/article/details/98100378">十大经典排序算法的复杂度分析</a></p>
<table>
<thead>
<tr>
<th>排序方法</th>
<th>时间复杂度(平均)</th>
<th>时间复杂度(最坏)</th>
<th>时间复杂度(最好)</th>
<th>空间复杂度</th>
<th>稳定性</th>
</tr>
</thead>
<tbody><tr>
<td>插入排序</td>
<td>O(n<sup>2</sup>)</td>
<td>O(n<sup>2</sup>)</td>
<td>O(n)</td>
<td>O(1)</td>
<td>稳定</td>
</tr>
<tr>
<td>冒泡排序</td>
<td>O(n<sup>2</sup>)</td>
<td>O(n<sup>2</sup>)</td>
<td>O(n)</td>
<td>O(1)</td>
<td>稳定</td>
</tr>
<tr>
<td>选择排序</td>
<td>O(n<sup>2</sup>)</td>
<td>O(n<sup>2</sup>)</td>
<td>O(n)</td>
<td>O(1)</td>
<td>不稳定</td>
</tr>
</tbody></table>
<h1 id="思考过程"><a href="#思考过程" class="headerlink" title="思考过程"></a>思考过程</h1><p>这三个算法是最符合人类逻辑的算法，均可以用循环嵌套完成。因为都是在原数组上进行操作，实际最关键的步骤就是根据<code>index</code>来交换数组中的元素。看动图<a target="_blank" rel="noopener" href="https://www.cnblogs.com/onepixel/articles/7674659.html">（点这里）</a>很清晰。（图床没做好，未来搞gif进文章，哭哭~）<br>代码实现思路见代码注释。</p>
<h1 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h1><h4 id="1-插入排序"><a href="#1-插入排序" class="headerlink" title="1.插入排序"></a>1.插入排序</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 插入排序</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">insertSort</span>(<span class="params">array</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">let</span> tmp;</span><br><span class="line">	<span class="comment">// 外层循环，从第二个数开始，插入是从后往前对比，第一个不需要处理。</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; array.length; i++) &#123;</span><br><span class="line">		<span class="comment">// 内层循环，从i开始，往前对比，直到第一个数。</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">let</span> j = i; j &gt; <span class="number">0</span> ; j--) &#123;</span><br><span class="line">			<span class="comment">// 如果发现前一个数比较大，交换位置。</span></span><br><span class="line">			<span class="keyword">if</span>(array[j] &lt; array [j<span class="number">-1</span>])&#123;</span><br><span class="line">				tmp = array[j]</span><br><span class="line">				array[j] = array[j<span class="number">-1</span>]</span><br><span class="line">				array[j<span class="number">-1</span>] = tmp</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="comment">// 因为第二层循环的数组是已经排序完成的，所以如果前一个数比较小，就可以结束此轮内部循环。</span></span><br><span class="line">				<span class="keyword">break</span></span><br><span class="line">			&#125;			</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> array</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-冒泡排序"><a href="#2-冒泡排序" class="headerlink" title="2.冒泡排序"></a>2.冒泡排序</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 冒泡排序</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bubbleSort</span>(<span class="params">array</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">let</span> tmp</span><br><span class="line">	<span class="comment">// 外层循环，从第一个数开始。</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; array.length; i++) &#123;</span><br><span class="line">		<span class="comment">// 内层循环，因为冒泡排序会把最大的数放最后，所以内层每执行完一轮，未排序的数组长度就会-1。</span></span><br><span class="line">		<span class="comment">// 所以循环条件为 j &lt; array.length - (i+1)。</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; array.length - (i+<span class="number">1</span>); j++) &#123;</span><br><span class="line">			<span class="comment">// 如果发现前一个数比后一个数大，交换位置，直到最大的数排到队尾。</span></span><br><span class="line">			<span class="keyword">if</span> (array[j] &gt; array[j+<span class="number">1</span>]) &#123;</span><br><span class="line">				tmp = array[j]</span><br><span class="line">				array[j] = array[j+<span class="number">1</span>]</span><br><span class="line">				array[j+<span class="number">1</span>] = tmp</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> array</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-选择排序"><a href="#3-选择排序" class="headerlink" title="3.选择排序"></a>3.选择排序</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 选择排序</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">selectSort</span>(<span class="params">array</span>)</span>&#123;</span><br><span class="line">	<span class="comment">// 选择排序不太一样，循环一遍，找到最小值再进行交换，所以定义一个最新索引minIndex</span></span><br><span class="line">	<span class="keyword">let</span> tmp,minIndex</span><br><span class="line">	<span class="comment">// 外层循环，循环整个数组</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; array.length; i++) &#123;</span><br><span class="line">		minIndex = i</span><br><span class="line">		<span class="comment">// 内层循环，因为外层每循环一次，之前的数组就是已经排序的了，所以内层循环从i+1开始。</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">let</span> j = i+<span class="number">1</span>; j &lt; array.length; j++) &#123;</span><br><span class="line">			<span class="comment">// 发现更小的数，则记录下该数的索引</span></span><br><span class="line">			<span class="keyword">if</span>(array[j] &lt; array[minIndex])&#123;</span><br><span class="line">				minIndex = j;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 内部循环结束后，交换i和minIndex的位置</span></span><br><span class="line">		tmp = array[i]</span><br><span class="line">		array[i] = array[minIndex]</span><br><span class="line">		array[minIndex] = tmp</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> array</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>至此，基础三算法填坑成功。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wws563.github.io/2020/11/24/vue%E6%89%93%E5%8C%85%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/author.jpg">
      <meta itemprop="name" content="E1son">
      <meta itemprop="description" content="#1 - The first rule of Fight Club is, you do not talk about Fight Club.<br/> #2 - The second rule of Fight Club is, you DO NOT talk about Fight Club.<br/> #3 - If someone says stop, goes limp, taps out, the fight is over.<br/> #4 - Two guys to a fight.<br/> #5 - One fight at a time.<br/> #6 - No shirts, no shoes.<br/> #7 - Fights will go on as long as they have to.<br/> #8 - If this is your first night at Fight Club, you have to fight.<br/>">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FightClub">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/24/vue%E6%89%93%E5%8C%85%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" class="post-title-link" itemprop="url">vue打包性能优化</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-11-24 14:28:42" itemprop="dateCreated datePublished" datetime="2020-11-24T14:28:42+08:00">2020-11-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-11-26 21:38:44" itemprop="dateModified" datetime="2020-11-26T21:38:44+08:00">2020-11-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%89%93%E5%8C%85%E5%8F%91%E5%B8%83/" itemprop="url" rel="index"><span itemprop="name">打包发布</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/11/24/vue%E6%89%93%E5%8C%85%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/11/24/vue%E6%89%93%E5%8C%85%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>Vue项目打开页面时间很久，近2s，研究优化打包的方法。</p>
<h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul>
<li>vue2.5</li>
<li>vue-cli4</li>
<li>babel6(6，7某些设置有区别，具体参考官网)</li>
<li>vscode</li>
</ul>
<h1 id="分析工具"><a href="#分析工具" class="headerlink" title="分析工具"></a>分析工具</h1><h2 id="webpack-bundle-analyzer"><a href="#webpack-bundle-analyzer" class="headerlink" title="webpack-bundle-analyzer"></a>webpack-bundle-analyzer</h2><p>提供可视化资源分析工具，检查是什么东西占用了较多空间，方便针对性进行优化。<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/webpack-bundle-analyzer?__cf_chl_captcha_tk__=cf96b4937d6d6c62ff1bc26ad84c0a5744ceb8de-1606200523-0-AcAaXmnQPgFsDC9cRt0SKVVIXrpac3SWerRWyshMYnvudoGUiV0hU7zfOMDrca4Hmyi4ZngIo9gq9x2N8dGqD0xH_vwL9TEWQ3_kePCMdEDp2NyDYHTq2zngWqrLQ3TfXH9pmcqTdQrv5bz5Tfx1R3K-15GA_c8Prv6tCB24utQbK_Ei6y0cK0w00QJR65MElPhKayccXC9VHjByIaDB2godPdj0b0Pc2EFwcRbF6vZ63JlanEE1253GGPRNXWbznCX2m_I3tbxpbPFybZ5fPibpeWzLwj7PkMgABgp99NaOSWOtN0BkU0FRTWai_mw7WvMx43jMNncq00q64DT2Lbm2S7O2zPUpQA0C1bk5TEOxbM9Q4dux3x8kKhmdcceDHHsK8ju2-MOxihd-g_kC3gzSmwIKkrYlyfttDfe1NyxBosxWUIJ-Xt4SFHQwlv-4DIRCCeGbyiKg9DjpWLUw4DvfF_d2MUjkzftYoT4RkCVgdHcyQQUugxcNB57vHL9g7JpuFC_aqWL39utOmovjZXAwBvm14K7wY8EEBB8pAWcy1dIhSqufmtSqiW-hky6_Ng">官网</a></p>
<ul>
<li><p>安装</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># NPM </span></span><br><span class="line"><span class="string">npm</span> <span class="string">install</span> <span class="string">--save-dev</span> <span class="string">webpack-bundle-analyzer</span></span><br><span class="line"><span class="comment"># Yarn </span></span><br><span class="line"><span class="string">yarn</span> <span class="string">add</span> <span class="string">-D</span> <span class="string">webpack-bundle-analyzer</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>配置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack</span></span><br><span class="line"><span class="keyword">const</span> BundleAnalyzerPlugin = <span class="built_in">require</span>(<span class="string">&#x27;webpack-bundle-analyzer&#x27;</span>).BundleAnalyzerPlugin;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> BundleAnalyzerPlugin()</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//vue.config.js（cli框架时，采用以下方式使用）</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	<span class="comment">//其他设置</span></span><br><span class="line">	chainWebpack: <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">      config</span><br><span class="line">          .plugin(<span class="string">&#x27;webpack-bundle-analyzer&#x27;</span>)</span><br><span class="line">          .use(<span class="built_in">require</span>(<span class="string">&#x27;webpack-bundle-analyzer&#x27;</span>).BundleAnalyzerPlugin)</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> config;</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>配置完毕后，执行打包命令会提示:</p>
<blockquote>
<p>Webpack Bundle Analyzer is started at <a target="_blank" rel="noopener" href="http://127.0.0.1:8888/">http://127.0.0.1:8888</a></p>
</blockquote>
<p>进入 <a target="_blank" rel="noopener" href="http://127.0.0.1:8888/">http://127.0.0.1:8888</a> 即可查看分析。</p>
<h1 id="优化性能"><a href="#优化性能" class="headerlink" title="优化性能"></a>优化性能</h1><h2 id="1-chunks分片"><a href="#1-chunks分片" class="headerlink" title="1-chunks分片"></a>1-chunks分片</h2><p>避免打包时，单个文件过大导致性能变差，webpack提供了分片功能，可以按需切割代码。</p>
<h3 id="分片代码配置（vue-config-js）"><a href="#分片代码配置（vue-config-js）" class="headerlink" title="分片代码配置（vue.config.js）"></a>分片代码配置（vue.config.js）</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">//此处pages等省略基础属性</span></span><br><span class="line"></span><br><span class="line">	configureWebpack: <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">			<span class="comment">//代码分片</span></span><br><span class="line">            config.optimization = &#123;</span><br><span class="line">	<span class="comment">//可以根据需求分片，默认有两个&quot;chunk-common&quot;和&quot;chunk-vendors&quot;</span></span><br><span class="line">                splitChunks: &#123;</span><br><span class="line">                  cacheGroups: &#123;</span><br><span class="line">                    common: &#123;</span><br><span class="line">                      name: <span class="string">&quot;chunk-common&quot;</span>,</span><br><span class="line">                      chunks: <span class="string">&quot;initial&quot;</span>,</span><br><span class="line">                      minChunks: <span class="number">2</span>,</span><br><span class="line">                      maxInitialRequests: <span class="number">5</span>,</span><br><span class="line">                      minSize: <span class="number">0</span>,</span><br><span class="line">                      priority: <span class="number">1</span>,</span><br><span class="line">                      reuseExistingChunk: <span class="literal">true</span>,</span><br><span class="line">                      enforce: <span class="literal">true</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    vendors: &#123;</span><br><span class="line">                      name: <span class="string">&quot;chunk-vendors&quot;</span>,</span><br><span class="line">                      test: <span class="regexp">/[\\/]node_modules[\\/]/</span>,</span><br><span class="line">                      chunks: <span class="string">&quot;initial&quot;</span>,</span><br><span class="line">                      priority: <span class="number">2</span>,</span><br><span class="line">                      reuseExistingChunk: <span class="literal">true</span>,</span><br><span class="line">                      enforce: <span class="literal">true</span></span><br><span class="line">					&#125;,</span><br><span class="line">		<span class="comment">//如果有比较大的组件想单独分片比如elementUI，就添加一个设置如下:</span></span><br><span class="line">                    elementUI: &#123;</span><br><span class="line">                      name: <span class="string">&quot;chunk-elementui&quot;</span>,</span><br><span class="line">                      test: <span class="regexp">/[\\/]node_modules[\\/]element-ui[\\/]/</span>,</span><br><span class="line">                      chunks: <span class="string">&quot;all&quot;</span>,</span><br><span class="line">                      priority: <span class="number">3</span>,</span><br><span class="line">                      reuseExistingChunk: <span class="literal">true</span>,</span><br><span class="line">                      enforce: <span class="literal">true</span></span><br><span class="line">					&#125;,</span><br><span class="line">		<span class="comment">//其他同理:</span></span><br><span class="line">                    echarts: &#123;</span><br><span class="line">                      name: <span class="string">&quot;chunk-echarts&quot;</span>,</span><br><span class="line">                      test: <span class="regexp">/[\\/]node_modules[\\/](vue-)?echarts[\\/]/</span>,</span><br><span class="line">                      chunks: <span class="string">&quot;all&quot;</span>,</span><br><span class="line">                      priority: <span class="number">4</span>,</span><br><span class="line">                      reuseExistingChunk: <span class="literal">true</span>,</span><br><span class="line">                      enforce: <span class="literal">true</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    iview: &#123;</span><br><span class="line">                        name: <span class="string">&quot;chunk-iview&quot;</span>,</span><br><span class="line">                        test: <span class="regexp">/[\\/]node_modules[\\/]iview[\\/]/</span>,</span><br><span class="line">                        chunks: <span class="string">&quot;all&quot;</span>,</span><br><span class="line">                        priority: <span class="number">5</span>,</span><br><span class="line">                        reuseExistingChunk: <span class="literal">true</span>,</span><br><span class="line">                        enforce: <span class="literal">true</span></span><br><span class="line">                      &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="2-iview优化"><a href="#2-iview优化" class="headerlink" title="2-iview优化"></a>2-iview优化</h2><h3 id="按需加载"><a href="#按需加载" class="headerlink" title="按需加载"></a>按需加载</h3><h4 id="使用babel-plugin-import插件进行按需加载"><a href="#使用babel-plugin-import插件进行按需加载" class="headerlink" title="使用babel-plugin-import插件进行按需加载"></a>使用<a target="_blank" rel="noopener" href="https://ant.design/docs/react/getting-started-cn#%E6%8C%89%E9%9C%80%E5%8A%A0%E8%BD%BD">babel-plugin-import插件</a>进行按需加载</h4><p>参考文章:</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/wangtong111/p/11522520.html">iview简单使用+按需加载组件的方法（全局和局部）</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_40599109/article/details/107941438">cli框架下的配置文件babel.config.js</a></p>
</blockquote>
<ol>
<li>安装依赖</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install babel-plugin-<span class="keyword">import</span> --save-dev <span class="comment">//如果没有安装过babel，安装完以后npm install一下应该就可以。</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>修改babel的配置文件babel.config.js</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    plugins:[</span><br><span class="line">        [<span class="string">&quot;import&quot;</span>,&#123;</span><br><span class="line">                <span class="string">&quot;libraryName&quot;</span>: <span class="string">&quot;iview&quot;</span>, <span class="comment">//插件名称</span></span><br><span class="line">                <span class="string">&quot;libraryDirectory&quot;</span>: <span class="string">&quot;src/components&quot;</span>, <span class="comment">//根据组件的实际位置填写，iview的为src/components;default: lib</span></span><br><span class="line">                <span class="comment">//&quot;style&quot;: true //iview没有组件的css只能全部引用，其他组件需要使用的情况，参考官网</span></span><br><span class="line">              &#125;</span><br><span class="line">        ]</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>在使用iview的文件中，使用按需加载的方式引入iview</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//全部加载的情况</span></span><br><span class="line"><span class="keyword">import</span> iView <span class="keyword">from</span> <span class="string">&#x27;iview&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;iview/dist/styles/iview.css&#x27;</span></span><br><span class="line">Vue.use(iView);</span><br><span class="line"></span><br><span class="line"><span class="comment">//按需加载的写法</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; Carousel &#125; <span class="keyword">from</span> <span class="string">&#x27;iview&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;iview/dist/styles/iview.css&#x27;</span></span><br><span class="line">Vue.use (Carousel); <span class="comment">//如果Vue.use有问题，可尝试使用Vue.component进行注册。</span></span><br></pre></td></tr></table></figure>

<p><img src="https://i.loli.net/2020/11/24/bO86GDLYr54MuyR.png" alt="单项目打包（iview全加载）.png"></p>
<p><img src="https://i.loli.net/2020/11/24/nfA1ToYztxZC9BE.png" alt="单项目打包（iview按需加载）.png"></p>
<p>因为仅使用了iview里的<code>Carousel</code>组件，优化后的包仅打包了这个组件的iview代码，可以直观的看到打包小了很多。</p>
<h2 id="3-图片压缩"><a href="#3-图片压缩" class="headerlink" title="3-图片压缩"></a>3-图片压缩</h2><h3 id="image-webpack-loader图片压缩工具"><a href="#image-webpack-loader图片压缩工具" class="headerlink" title="image-webpack-loader图片压缩工具"></a><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/image-webpack-loader">image-webpack-loader图片压缩工具</a></h3><h2 id="4-使用CDN代替打包"><a href="#4-使用CDN代替打包" class="headerlink" title="4-使用CDN代替打包"></a>4-使用CDN代替打包</h2><p>设置比较简单，项目中也没有用到。借个文章看一下——<br><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/28dbb85b2c98">Vue/cli项目使用CDN进行优化
</a></p>
<ul>
<li>优点 性能佳</li>
<li>缺点 不够稳定</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wws563.github.io/2020/11/11/vue-cli4%E5%A4%9A%E9%A1%B9%E7%9B%AE%E5%8D%95%E7%8B%AC%E6%89%93%E5%8C%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/author.jpg">
      <meta itemprop="name" content="E1son">
      <meta itemprop="description" content="#1 - The first rule of Fight Club is, you do not talk about Fight Club.<br/> #2 - The second rule of Fight Club is, you DO NOT talk about Fight Club.<br/> #3 - If someone says stop, goes limp, taps out, the fight is over.<br/> #4 - Two guys to a fight.<br/> #5 - One fight at a time.<br/> #6 - No shirts, no shoes.<br/> #7 - Fights will go on as long as they have to.<br/> #8 - If this is your first night at Fight Club, you have to fight.<br/>">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FightClub">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/11/vue-cli4%E5%A4%9A%E9%A1%B9%E7%9B%AE%E5%8D%95%E7%8B%AC%E6%89%93%E5%8C%85/" class="post-title-link" itemprop="url">vue-cli4多项目单独打包</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-11-11 13:26:05" itemprop="dateCreated datePublished" datetime="2020-11-11T13:26:05+08:00">2020-11-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-11-26 21:38:44" itemprop="dateModified" datetime="2020-11-26T21:38:44+08:00">2020-11-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%89%93%E5%8C%85%E5%8F%91%E5%B8%83/" itemprop="url" rel="index"><span itemprop="name">打包发布</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/11/11/vue-cli4%E5%A4%9A%E9%A1%B9%E7%9B%AE%E5%8D%95%E7%8B%AC%E6%89%93%E5%8C%85/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/11/11/vue-cli4%E5%A4%9A%E9%A1%B9%E7%9B%AE%E5%8D%95%E7%8B%AC%E6%89%93%E5%8C%85/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>公司的项目多是各种活动，数量上去以后单入口模式会很臃肿，为了今后避免重复打包过期项目，欲配置为多入口项目。每次打包，只打包指定项目。于是进行以下优化配置。</p>
<h2 id=""><a href="#" class="headerlink" title=""></a></h2><h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><ul>
<li>vue2.5</li>
<li>vue-cli4</li>
<li>babel6(6，7某些设置有区别，具体参考官网)</li>
<li>vscode</li>
</ul>
<h1 id="Vue多入口打包"><a href="#Vue多入口打包" class="headerlink" title="Vue多入口打包"></a>Vue多入口打包</h1><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/xiyangcai/p/8609773.html">vue搭建多页面开发环境</a></p>
</blockquote>
<h2 id="文件目录结构"><a href="#文件目录结构" class="headerlink" title="文件目录结构"></a>文件目录结构</h2><p>目录不复杂，就是在src下面按照项目建立文件夹并为每个添加入口的main.js。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">├─node_modules</span><br><span class="line">│  └─... &#x2F;&#x2F; 依赖库</span><br><span class="line">├─public</span><br><span class="line">│  └─index.html &#x2F;&#x2F; template模板文件</span><br><span class="line">├─src</span><br><span class="line">│  └─Asset &#x2F;&#x2F;静态文件</span><br><span class="line">│  └─View &#x2F;&#x2F;页面文件</span><br><span class="line">│      ├─projectA</span><br><span class="line">│      │  ├─Home.vue </span><br><span class="line">│      │  ├─main.js &#x2F;&#x2F; webpack入口文件</span><br><span class="line">│      │  └─router.js </span><br><span class="line">│      └─projectB</span><br><span class="line">│          ├─Home.vue </span><br><span class="line">│          ├─main.js &#x2F;&#x2F; webpack入口文件</span><br><span class="line">│          └─router.js </span><br><span class="line">└─vue.config.js &#x2F;&#x2F; vue-cli提供的封装的webpack配置文件</span><br></pre></td></tr></table></figure>

<h2 id="package-json设置"><a href="#package-json设置" class="headerlink" title="package.json设置"></a>package.json设置</h2><p>package.json关注script中的这一项，是正式打包用的命令。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;build&quot;</span>: <span class="string">&quot;vue-cli-service build --mode production&quot;</span>,</span><br></pre></td></tr></table></figure>

<p>根据以下设置，打包时我们在VScode控制台（快捷键<code>Ctrl + shift + ~</code>）输入</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure>
<p>执行的就是下面这段代码。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue-cli-service build --mode </span><br></pre></td></tr></table></figure>
<p>由于需要多入口打包，并且每个项目独享一个目录，目录下的css，js都是该项目专用，所以需要添加一个<code>项目名</code>参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm run build projectA</span><br><span class="line"><span class="comment">//实际执行的命令为</span></span><br><span class="line">vue-cli-service build --mode projectA</span><br></pre></td></tr></table></figure>

<h2 id="vue-config-js设置"><a href="#vue-config-js设置" class="headerlink" title="vue.config.js设置"></a>vue.config.js设置</h2><p>vue.config.js是cli框架封装的wabpack配置文件。其实格式基本和webpage的config差不多。这是最关键的配置文件，用于管理生成时的来源、输出目录和其他各种配置。<br>为了方便开发，我们对生产打包和开发调试需要进行不同的设置，达成的目的是</p>
<ol>
<li>开发调试时，输入<code>npm run server</code>不需要输入项目名，按照项目生成，可以访问任意项目。</li>
<li>正式打包时，输入上面说的带项目名的打包指令，生成单独项目的打包文件。</li>
</ol>
<p>具体区别见详见下面的配置注释。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入依赖</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> glob = <span class="built_in">require</span>(<span class="string">&#x27;glob&#x27;</span>)</span><br><span class="line"><span class="comment">// 是否为生产环境</span></span><br><span class="line"><span class="keyword">const</span> isPrd = process.env.NODE_ENV === <span class="string">&#x27;production&#x27;</span></span><br><span class="line"><span class="comment">// 按项目打包参数，读取npm run build &#x27;projectName&#x27;的最后的&#x27;projectName&#x27;</span></span><br><span class="line"><span class="keyword">const</span> projectName = process.argv[<span class="number">5</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(!projectName &amp;&amp; isPrd)&#123;<span class="comment">//正式打包时没有输入项目名报错</span></span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;未指定项目名，请执行如下命令npm run build &quot;项目名&quot;&#x27;</span>) </span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">const</span> targetPage = entries(projectName) <span class="comment">//见最下</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    publicPath: isPrd ? <span class="string">&#x27;/&#x27;</span> + projectName : <span class="string">&#x27;/&#x27;</span>, <span class="comment">//发布时静态文件放入项目名文件夹内。开发时，放入根目录下，这样各个项目都可以调试。</span></span><br><span class="line">    outputDir: isPrd ? path.resolve(process.env.outputDir,projectName) :process.env.outputDir, <span class="comment">//同上</span></span><br><span class="line">    pages: targetPage</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 根据项目文件目录获取项目入口</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">entries</span>(<span class="params">projectName</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//使用glob工具获得所有入口的路径</span></span><br><span class="line">  <span class="keyword">var</span> entryFiles = glob.sync(<span class="string">&#x27;./src/View/**/main.js&#x27;</span>);</span><br><span class="line">  <span class="keyword">var</span> map = &#123;&#125;;</span><br><span class="line">  <span class="keyword">var</span> filePath,filename,matchFlg = <span class="literal">false</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 循环获得的入口路径，生成多入口的pages信息</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; entryFiles.length; i++) &#123;</span><br><span class="line">      filePath = entryFiles[i];</span><br><span class="line">      filename = filePath.split(<span class="string">&#x27;/&#x27;</span>)[filePath.split(<span class="string">&#x27;/&#x27;</span>).length - <span class="number">2</span>];</span><br><span class="line">      map[filename] = &#123;</span><br><span class="line">        entry:filePath,      </span><br><span class="line">        template: <span class="string">&quot;public/index.html&quot;</span>,</span><br><span class="line">        filename: filename+<span class="string">&quot;/index.html&quot;</span>,</span><br><span class="line">        <span class="comment">// 如果使用chunks，最后一个参数必须为项目名（filename）</span></span><br><span class="line">        chunks: [<span class="string">&quot;chunk-vendors&quot;</span>, <span class="string">&quot;chunk-common&quot;</span>,filename]</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 如果有项目名参数，且和入口列表中的项目名一致，清空列表，仅返回该项目的page信息。</span></span><br><span class="line">      <span class="keyword">if</span>(projectName == filename)&#123;</span><br><span class="line">        matchFlg = <span class="literal">true</span>;</span><br><span class="line">        map = &#123;&#125;;</span><br><span class="line">        map[filename] = &#123;</span><br><span class="line">          entry:filePath,      </span><br><span class="line">          template: <span class="string">&quot;public/index.html&quot;</span>,</span><br><span class="line">          filename: <span class="string">&quot;index.html&quot;</span>,</span><br><span class="line">          chunks: [<span class="string">&quot;chunk-vendors&quot;</span>, <span class="string">&quot;chunk-common&quot;</span>,filename]</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span>(projectName &amp;&amp; !matchFlg)&#123; <span class="comment">//如果输入了项目名但不匹配，则报错。</span></span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;项目名有误,未找到匹配的项目&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> map;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>按照上述配置后，执行<code>npm run build pagea</code>命令，就可以得到如<code>/dist/pagea/...</code>的打包文件。将这个文件部署到任意环境，即可访问<code>发布根目录/pagea</code>。<br>同理，可以通过<code>npm run build pageb</code>完成对projectB项目的打包。<br>至此，按照项目打包多入口Vue项目完成。</p>
<h2 id="可能问题"><a href="#可能问题" class="headerlink" title="可能问题"></a>可能问题</h2><ul>
<li>缺少依赖，执行<code>npm install</code>添加依赖。</li>
<li>部分设置后，可能需要重启vscode或删除已生成的dist文件。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wws563.github.io/2020/10/26/ES6%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B02%E2%80%94%E2%80%94%E5%8F%98%E9%87%8F%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/author.jpg">
      <meta itemprop="name" content="E1son">
      <meta itemprop="description" content="#1 - The first rule of Fight Club is, you do not talk about Fight Club.<br/> #2 - The second rule of Fight Club is, you DO NOT talk about Fight Club.<br/> #3 - If someone says stop, goes limp, taps out, the fight is over.<br/> #4 - Two guys to a fight.<br/> #5 - One fight at a time.<br/> #6 - No shirts, no shoes.<br/> #7 - Fights will go on as long as they have to.<br/> #8 - If this is your first night at Fight Club, you have to fight.<br/>">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FightClub">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/26/ES6%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B02%E2%80%94%E2%80%94%E5%8F%98%E9%87%8F%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC/" class="post-title-link" itemprop="url">ES6学习笔记2——变量解构赋值</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-10-26 09:55:08" itemprop="dateCreated datePublished" datetime="2020-10-26T09:55:08+08:00">2020-10-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-28 00:12:54" itemprop="dateModified" datetime="2020-10-28T00:12:54+08:00">2020-10-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/js%E5%9F%BA%E7%A1%80/" itemprop="url" rel="index"><span itemprop="name">js基础</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/10/26/ES6%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B02%E2%80%94%E2%80%94%E5%8F%98%E9%87%8F%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/10/26/ES6%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B02%E2%80%94%E2%80%94%E5%8F%98%E9%87%8F%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>基于阮一峰老师的<a target="_blank" rel="noopener" href="https://es6.ruanyifeng.com/#docs/let">ECMAScript 6 入门</a>进行学习。记录或重要或常用的部分，并尝试总结使用场景。</p>
</blockquote>
<h1 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h1><blockquote>
<p>ES6 允许按照一定模式，从数组和对象中提取值，对变量进行赋值，这被称为解构（Destructuring）。</p>
</blockquote>
<p>ES5的复数变量定义</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">let</span> c = <span class="number">3</span>;</span><br></pre></td></tr></table></figure>

<p>ES6可以简化为如下形式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [a, b, c] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br></pre></td></tr></table></figure>

<h2 id="除了数组，对象，字符串，Set都可以进行解构"><a href="#除了数组，对象，字符串，Set都可以进行解构" class="headerlink" title="除了数组，对象，字符串，Set都可以进行解构"></a>除了数组，对象，字符串，Set都可以进行解构</h2><ol>
<li>对象解构</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;foo, bar&#125; = &#123;<span class="attr">foo</span>:<span class="number">1</span>,<span class="attr">bar</span>:<span class="number">2</span>&#125;; </span><br><span class="line"><span class="built_in">console</span>.log(foo) <span class="comment">//1</span></span><br><span class="line"><span class="built_in">console</span>.log(bar) <span class="comment">//2</span></span><br></pre></td></tr></table></figure>
<p><strong>注意:</strong> 这里的foo和bar是用于匹配的key，如果变量名和来源对象同名的情况，可以按照上面的方式做。但通常，我们需要改变变量的名称，这个时候写法如下</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//对象结构</span></span><br><span class="line"><span class="keyword">let</span> &#123;<span class="attr">foo</span>:myfoo, <span class="attr">bar</span>:mybar&#125; = &#123;<span class="attr">foo</span>:<span class="number">1</span>,<span class="attr">bar</span>:<span class="number">2</span>&#125;; </span><br><span class="line"><span class="built_in">console</span>.log(foo) <span class="comment">//undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(myfoo) <span class="comment">//1 </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//myfoo才是真正被解构赋值的变量名，foo仅仅用来匹配对应的数据。</span></span><br></pre></td></tr></table></figure>

<p>对象的解构赋值，可以很方便地将现有对象的方法，赋值到某个变量。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//下面把console对象下的log方法，赋值给了mylog这个变量上。</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="attr">log</span>:mylog &#125; = <span class="built_in">console</span>;</span><br><span class="line">mylog(<span class="string">&#x27;123&#x27;</span>) <span class="comment">// 123</span></span><br></pre></td></tr></table></figure>


<ol start="2">
<li>字符串解构</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [a,b,c] = <span class="string">&#x27;string&#x27;</span>; </span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">//s</span></span><br><span class="line"><span class="built_in">console</span>.log(b) <span class="comment">//t</span></span><br><span class="line"><span class="built_in">console</span>.log(c) <span class="comment">//r</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>Set解构</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [a,b,c] = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]); </span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">//1</span></span><br><span class="line"><span class="built_in">console</span>.log(b) <span class="comment">//2</span></span><br><span class="line"><span class="built_in">console</span>.log(c) <span class="comment">//3 n</span></span><br></pre></td></tr></table></figure>

<h2 id="嵌套解构"><a href="#嵌套解构" class="headerlink" title="嵌套解构"></a>嵌套解构</h2><p>对于嵌套的对象，可以通过如下方式进行解构。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> node = &#123;</span><br><span class="line">  loc: &#123;</span><br><span class="line">    start: &#123;</span><br><span class="line">      line: <span class="number">1</span>,</span><br><span class="line">      column: <span class="number">5</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123; loc, <span class="attr">loc</span>: &#123; start &#125;, <span class="attr">loc</span>: &#123; <span class="attr">start</span>: &#123; line &#125;&#125; &#125; = node;</span><br><span class="line">loc  <span class="comment">// Object &#123;start: Object&#125;</span></span><br><span class="line">start <span class="comment">// Object &#123;line: 1, column: 5&#125;</span></span><br><span class="line">line <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<h2 id="默认值"><a href="#默认值" class="headerlink" title="默认值"></a>默认值</h2><p>和函数参数一样，解构赋值一样可以指定默认值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span> (<span class="params">x = <span class="number">1</span></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(x)</span><br><span class="line">&#125;</span><br><span class="line">foo() <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//解构赋值</span></span><br><span class="line"><span class="keyword">var</span> &#123;x = <span class="number">3</span>&#125; = &#123;&#125;;</span><br><span class="line">x <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> &#123;x, y = <span class="number">5</span>&#125; = &#123;<span class="attr">x</span>: <span class="number">1</span>&#125;;</span><br><span class="line">x <span class="comment">// 1</span></span><br><span class="line">y <span class="comment">// 5</span></span><br></pre></td></tr></table></figure>

<h1 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h1><ol>
<li>变量交换</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> y = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">[x, y] = [y, x]; <span class="comment">// [2,1]</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>从函数返回多个值</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 返回一个数组</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> [a, b, c] = example();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回一个对象</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    foo: <span class="number">1</span>,</span><br><span class="line">    bar: <span class="number">2</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> &#123; foo, bar &#125; = example();</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>函数参数的定义</li>
</ol>
<p><strong>重要!!</strong> 这个对于大型的参数很多的组件非常有用，可以让参数不需要按照顺序输入，只需要匹配参数名即可，极大提高了易用性。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 参数是一组无次序的值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">&#123;x, y, z&#125;</span>) </span>&#123; ... &#125;</span><br><span class="line">f(&#123;<span class="attr">z</span>: <span class="number">3</span>, <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">x</span>: <span class="number">1</span>&#125;);</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>提取 JSON 数据</li>
</ol>
<p>很方便的从json数据中提取想要的数据,同时还能替换变量名。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> jsonData = &#123;</span><br><span class="line">  id: <span class="number">42</span>,</span><br><span class="line">  status: <span class="string">&quot;OK&quot;</span>,</span><br><span class="line">  data: [<span class="number">867</span>, <span class="number">5309</span>]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123; id, status, <span class="attr">data</span>: number &#125; = jsonData;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(id, status, number);</span><br><span class="line"><span class="comment">// 42, &quot;OK&quot;, [867, 5309]</span></span><br></pre></td></tr></table></figure>

<ol start="5">
<li>函数参数的默认值</li>
</ol>
<p>在 3.函数参数的定义 的基础上添加默认值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 参数是一组无次序的值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">&#123;x=<span class="number">1</span>, y=<span class="number">2</span>, z&#125;</span>) </span>&#123; ... &#125;</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>遍历Map结构</li>
</ol>
<blockquote>
<p>任何部署了 <code>Iterator</code> 接口的对象，都可以用<code>for...of</code>循环遍历。Map 结构原生支持 Iterator 接口，配合变量的解构赋值，获取键名和键值就非常方便。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">map.set(<span class="string">&#x27;first&#x27;</span>, <span class="string">&#x27;hello&#x27;</span>);</span><br><span class="line">map.set(<span class="string">&#x27;second&#x27;</span>, <span class="string">&#x27;world&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> map) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key + <span class="string">&quot; is &quot;</span> + value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// first is hello</span></span><br><span class="line"><span class="comment">// second is world</span></span><br></pre></td></tr></table></figure>
<ol start="7">
<li>输入模块的指定方法</li>
</ol>
<p>模块化的基础必备功能。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; SourceMapConsumer, SourceNode &#125; = <span class="built_in">require</span>(<span class="string">&quot;source-map&quot;</span>);</span><br></pre></td></tr></table></figure>

<div style="text-align:right">To Be Continued </div>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://wws563.github.io/2020/10/25/%E7%AE%97%E6%B3%95%E7%BB%83%E4%B9%A0%E4%B9%8B%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/author.jpg">
      <meta itemprop="name" content="E1son">
      <meta itemprop="description" content="#1 - The first rule of Fight Club is, you do not talk about Fight Club.<br/> #2 - The second rule of Fight Club is, you DO NOT talk about Fight Club.<br/> #3 - If someone says stop, goes limp, taps out, the fight is over.<br/> #4 - Two guys to a fight.<br/> #5 - One fight at a time.<br/> #6 - No shirts, no shoes.<br/> #7 - Fights will go on as long as they have to.<br/> #8 - If this is your first night at Fight Club, you have to fight.<br/>">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FightClub">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/25/%E7%AE%97%E6%B3%95%E7%BB%83%E4%B9%A0%E4%B9%8B%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/" class="post-title-link" itemprop="url">算法练习之快排算法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-10-25 19:39:11" itemprop="dateCreated datePublished" datetime="2020-10-25T19:39:11+08:00">2020-10-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-02 21:50:46" itemprop="dateModified" datetime="2020-12-02T21:50:46+08:00">2020-12-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" itemprop="url" rel="index"><span itemprop="name">计算机基础</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/10/25/%E7%AE%97%E6%B3%95%E7%BB%83%E4%B9%A0%E4%B9%8B%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/10/25/%E7%AE%97%E6%B3%95%E7%BB%83%E4%B9%A0%E4%B9%8B%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="概念介绍"><a href="#概念介绍" class="headerlink" title="概念介绍"></a>概念介绍</h1><p><a href="/2020/10/20/%E7%AE%97%E6%B3%95%E5%A1%AB%E5%9D%91">算法总集篇点这里→</a></p>
<p>前辈已经有了很好的说明，不再赘述。——<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=MzIxMjE5MTE1Nw==&mid=2653195042&idx=1&sn=2b0915cd2298be9f2163cc90a3d464da&chksm=8c99f9f8bbee70eef627d0f5e5b80a604221abb3a1b5617b397fa178582dcb063c9fb6f904b3&scene=21#wechat_redirect">漫画：什么是快速排序？（完整版）</a></p>
<h1 id="思考过程"><a href="#思考过程" class="headerlink" title="思考过程"></a>思考过程</h1><p>用JS撸和通常的后端代码，有一点点小区别，但总体还是类似，首先找到一个<code>pivot</code>基准元素，并对比其他元素，定义两个数列<code>leftArray</code>,<code>rightArray</code>,左边存放比<code>pivot</code>小的元素，另一边存放比<code>pivot</code>大的元素。最后将他们三个拼接并返回，这样就完成了一轮快速排序。通过<code>迭代</code>的方式，继续对刚才定义的<code>leftArray</code>,<code>rightArray</code>执行上面的操作，直到最后的数组只剩一个元素，直接返回。所有迭代跑完，我们就得到了排序完成的数组。</p>
<h1 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> org =[<span class="number">123</span>,<span class="number">234</span>,<span class="number">345</span>,<span class="number">123</span>,<span class="number">423</span>,<span class="number">1233</span>,<span class="number">452</span>,<span class="number">3</span>,<span class="number">45</span>,<span class="number">234</span>]; <span class="comment">//待排序的数组</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> quickSort = <span class="function"><span class="keyword">function</span> (<span class="params">array</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (array.length &lt; <span class="number">2</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> array; <span class="comment">//如果数组长度小于2，直接返回原数组即可。</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> p = array[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">let</span> la = [];</span><br><span class="line">  <span class="keyword">let</span> ra = [];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; array.length; i++) &#123;<span class="comment">//循环整个数组（注意这里从1开始因为，0是基准，不需要遍历）</span></span><br><span class="line">    <span class="keyword">if</span> (array[i] &lt;= p) &#123;</span><br><span class="line">      la.push(array[i]); <span class="comment">//生成比P小的左侧数组</span></span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">      ra.push(array[i]); <span class="comment">//生成比P大的右侧数组</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> quickSort(la).concat(p).concat(quickSort(ra)); <span class="comment">//按顺序拼接</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(quickSort(org)); <span class="comment">//[3, 45, 123, 123, 234, 234, 345, 423, 452, 1233]</span></span><br></pre></td></tr></table></figure>

<h1 id="未完待续"><a href="#未完待续" class="headerlink" title="未完待续"></a>未完待续</h1><p>这次代码实现的是最简单的快速排序，还有待优化——</p>
<ol>
<li>基准值取值取的是最左侧的，对于顺序/倒序数组，没法发挥快排效率。</li>
<li>重复声明左右侧数组，提高了空间复杂度，有待优化为不依赖新开数组的方法。</li>
<li>尝试以非迭代的方法实现快排。</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="E1son"
      src="/images/author.jpg">
  <p class="site-author-name" itemprop="name">E1son</p>
  <div class="site-description" itemprop="description">#1 - The first rule of Fight Club is, you do not talk about Fight Club.<br/> #2 - The second rule of Fight Club is, you DO NOT talk about Fight Club.<br/> #3 - If someone says stop, goes limp, taps out, the fight is over.<br/> #4 - Two guys to a fight.<br/> #5 - One fight at a time.<br/> #6 - No shirts, no shoes.<br/> #7 - Fights will go on as long as they have to.<br/> #8 - If this is your first night at Fight Club, you have to fight.<br/></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">14</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/wws563" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;wws563" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:641553199@qq.com" title="E-Mail → mailto:641553199@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fas fa-soap"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">E1son</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : '3hS8tON2ItG0OdEtBsV8JuFB-MdYXbMMI',
      appKey     : 'Ih7hoQtTfaVROYSr2sVgumli',
      placeholder: "I want your NOISE!~",
      avatar     : 'monsterid',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>


  <script type="text/javascript" src="/js/custom.js"></script>
</body>
</html>
